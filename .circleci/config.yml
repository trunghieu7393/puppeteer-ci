version: 2.1
jobs:
  build: # runs not using Workflows must have a `build` job as entry point
      working_directory: ~/. # directory where steps will run
      docker: # run the steps with Docker
        - image: node:13-slim # cai nay giong trong dockerfile
      steps: # a collection of executable commands
        - checkout # special step to check out source code to working directory
        - run:
            name: npm install
            command: 'npm install'
        - run:
            name: npm start
            command: 'npm run start'
        - run:
            name: npm test
            command: 'npm run test'

workflows:
  version: 2
  build_and_test:
    jobs:
      - build:
          filters: # using regex filters requires the entire branch to match
            branches:
              only: # only branches matching the below regex filters will run
                - master
                - /feature\/.*/